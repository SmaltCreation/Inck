{%  trans_default_domain 'ArticleBundle' %}

{% block content %}
    <div id="user-profile-subscriptions" class="panel panel-default">
        <div class="panel-heading" role="tabe" id="deadingSubscriptions">
            <h4 class="panel-title">
                <a class="collapsed" data-toggle="collapse" data-parent=".accordion" href="#collapseSubscriptions" aria-expanded="false" aria-controls="collapseSubscriptions">
                    <i class="fa fa-fw fa-book"></i>
                    {{ 'article.bookshelfl.bookshelfs'|trans }}<span class="badge pull-right">{{ app.user.bookshelfs|length }}</span>
                </a>
            </h4>
        </div>
        <div id="collapseSubscriptions" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSubscriptions">
            {% for bookshelf in app.user.bookshelfs %}
                <div class="panel-body">
                    <div class="panel-group" id="accordion{{ bookshelf.id }}" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default">
                            <div class="pane-heading" role="tab" id="headingOne{{ bookshelf.id }}">
                                <h4 class="panel-title">
                                    <a role="button" data-toggle="collapse" data-parent="#accordion{{ bookshelf.id }}" href="#collapseOne{{ bookshelf.id }}" aria-expanded="true" aria-controls="collapseOne">
                                        {% if bookshelf.title != "" %}
                                            <i class="fa fa-fw fa-bookmark"></i>
                                            {{ bookshelf.title }}<span class="badge pull-right">{{ bookshelf.articles|length }}</span>
                                        {% else %}
                                            <i>Sans titre</i> {{ bookshelf.articles|length }}
                                        {% endif %}
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseOne{{ bookshelf.id }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                                <div class="panel-body">
                                    {% for article in bookshelf.articles %}
                                        <div class="col-xs-6 col-sm-6 col-lg-4 col-article">
                                            {#set the variables#}
                                            {% set articleUrl = path('inck_article_article_show', {'id':article.id, 'slug':article.slug}) %}
                                            {% if article.imageName %}
                                                {% set img = vich_uploader_asset(article, 'article_image') %}
                                            {% else %}
                                                {% image '@InckArticleBundle/Resources/public/images/article/default.jpg' %}
                                                {% set img = asset_url %}
                                                {% endimage %}
                                            {% endif %}
                                            {# Display watch-later articles - order by date DESC #}
                                            <article id="article-{{ article.id }}" class="article">
                                                <a class="btn btn-default btn-circle btn-tooltip btn-unwatch-later pull-right btn-xs" data-id="{{ article.id }}" data-slug="{{ article.slug }}" data-toggle="tooltip" data-container="body" data-placement="top" title="retirer de la list">
                                                    <i class="fa fa-times"></i>
                                                </a>
                                                <div class="summary">
                                                    <div class="thumbnail">
                                                        <a href="{{ articleUrl }}">
                                                            <img src="{{ img|apply_filter('article_thumb') }}" alt="Image de l'article : {{ article.title }}">
                                                        </a>
                                                        <div class="caption">
                                                            <a class="caption">
                                                                <a class="btn-tooltip" data-toggle="tooltip" data-placement="bottom" data-container="body" title="{{ article.title }}" href="{{ articleUrl }}">
                                                                    {{ article.title }}
                                                                </a>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        </div>
                                    {% else %}
                                        <i>Aucun Article</i>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

{% endblock %}